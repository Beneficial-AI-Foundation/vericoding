vc-preamble: |-


vc-helpers: |-
  // Helper lemma to ensure set comprehension behaves as expected
  lemma SetSizeNonNegative(s: set<int>)
    ensures |s| >= 0
  {
  }

vc-spec: |-
  // <vc-spec>
  method CountIdenticalPositions(a: seq<int>, b: seq<int>, c: seq<int>) returns (count: int)
      requires |a| == |b| && |b| == |c|
      ensures count >= 0
      ensures count == | set i: int | 0 <= i < |a| && a[i] == b[i] && b[i] == c[i]|
  // </vc-spec>

vc-code: |-
  method CountIdenticalPositionsImpl(a: seq<int>, b: seq<int>, c: seq<int>) returns (count: int)
    requires |a| == |b| && |b| == |c|
    ensures count >= 0
    ensures count == | set i: int | 0 <= i < |a| && a[i] == b[i] && b[i] == c[i]|
  {
    var s := set i: int | 0 <= i < |a| && a[i] == b[i] && b[i] == c[i];
    count := |s|;
    assert count >= 0 by { SetSizeNonNegative(s); }
  }

vc-postamble: |-


