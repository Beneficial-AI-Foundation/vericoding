vc-preamble: |-


vc-helpers: |-
  // No additional helper code or proofs needed for this implementation

vc-spec: |-
  // <vc-spec>
  method PairwiseAddition(a: array<int>) returns (result: array<int>)
      requires a != null
      requires a.Length % 2 == 0
      ensures result != null
      ensures result.Length == a.Length / 2
      ensures forall i :: 0 <= i < result.Length ==> result[i] == a[2*i] + a[2*i + 1]
  // </vc-spec>

vc-code: |-
  method PairwiseAdditionImpl(a: array<int>) returns (result: array<int>)
      requires a.Length % 2 == 0
      ensures result.Length == a.Length / 2
      ensures forall i :: 0 <= i < result.Length ==> result[i] == a[2*i] + a[2*i + 1]
  {
      result := new int[a.Length / 2];
      var i := 0;
      while i < result.Length
          invariant 0 <= i <= result.Length
          invariant forall k :: 0 <= k < i ==> result[k] == a[2*k] + a[2*k + 1]
      {
          result[i] := a[2*i] + a[2*i + 1];
          i := i + 1;
      }
  }

vc-postamble: |-


