vc-preamble: |-


vc-helpers: |-
  // No additional helpers or proofs needed for this implementation

vc-spec: |-
  // <vc-spec>
  method ReplaceChars(s: string, oldChar: char, newChar: char) returns (v: string)
      ensures |v| == |s|
      ensures forall i :: 0 <= i < |s| ==> (s[i] == oldChar ==> v[i] == newChar) && (s[i] != oldChar ==> v[i] == s[i])
  // </vc-spec>

vc-code: |-
  method ReplaceCharsImpl(s: string, oldChar: char, newChar: char) returns (v: string)
      ensures |v| == |s|
      ensures forall i :: 0 <= i < |s| ==> (s[i] == oldChar ==> v[i] == newChar) && (s[i] != oldChar ==> v[i] == s[i])
  {
      v := "";
      var i := 0;
      while i < |s|
          invariant 0 <= i <= |s|
          invariant |v| == i
          invariant forall k :: 0 <= k < i ==> (s[k] == oldChar ==> v[k] == newChar) && (s[k] != oldChar ==> v[k] == s[k])
      {
          if s[i] == oldChar
          {
              v := v + [newChar];
          }
          else
          {
              v := v + [s[i]];
          }
          i := i + 1;
      }
  }

vc-postamble: |-


