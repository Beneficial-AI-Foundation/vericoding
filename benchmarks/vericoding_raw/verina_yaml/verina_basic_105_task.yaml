vc-description: |-
  /--
  -----Description-----
  This task involves computing the element-wise product of two integer arrays. For each position in the arrays, the corresponding numbers are multiplied together. If an element is missing in one of the arrays at a given index, the missing value is treated as 0. When both arrays provide values for every index, the resulting array will contain the product of the two numbers at each corresponding index.

  -----Input-----
  The input consists of two arrays:
  • a: An array of integers.
  • b: An array of integers (should be of equal length to a for the specification to hold).

  -----Output-----
  The output is an array of integers that:
  • Has the same length as the input arrays.
  • For each index i, the output array contains the product a[i] * b[i].
  • In cases where one of the arrays might be shorter, missing elements default to 0 during multiplication.

  -----Note-----
  It is assumed that the arrays are of equal length for the theorem specification, although the implementation defaults missing indices to 0.
  -/

vc-preamble: |-

vc-helpers: |-
  -- <vc-helpers>
  def loop (a b : Array Int) (len : Nat) : Nat → Array Int → Array Int
    | i, c =>
      if i < len then
        let a_val := if i < a.size then a[i]! else 0
        let b_val := if i < b.size then b[i]! else 0
        let new_c := Array.set! c i (a_val * b_val)
        loop a b len (i+1) new_c
      else c
  -- </vc-helpers>

vc-signature: |-
  def arrayProduct (a : Array Int) (b : Array Int) (h_precond : arrayProduct_precond (a) (b)) : Array Int :=

vc-implementation: |-
  -- <vc-implementation>
    let len := a.size
    let c := Array.mkArray len 0
    loop a b len 0 c
  -- </vc-implementation>
  
vc-condition: |-
  @[reducible, simp]
  def arrayProduct_precond (a : Array Int) (b : Array Int) : Prop :=
    a.size = b.size

  @[reducible, simp]
  def arrayProduct_postcond (a : Array Int) (b : Array Int) (result: Array Int) (h_precond : arrayProduct_precond (a) (b)) :=
    (result.size = a.size) ∧ (∀ i, i < a.size → a[i]! * b[i]! = result[i]!)

  theorem arrayProduct_spec_satisfied (a: Array Int) (b: Array Int) (h_precond : arrayProduct_precond (a) (b)) :
      arrayProduct_postcond (a) (b) (arrayProduct (a) (b) h_precond) h_precond := by

vc-proof: |-
  -- <vc-proof>
    sorry
  -- </vc-proof>

vc-postamble: |-