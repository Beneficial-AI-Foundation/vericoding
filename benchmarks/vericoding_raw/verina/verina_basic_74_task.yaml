vc-description: |-
  /--
  -----Description-----  
  This task involves identifying the maximum value in a non-empty array of integers. The objective is to determine which element in the array is greater than or equal to every other element, ensuring that the selected value is one of the elements in the array.

  -----Input-----  
  The input consists of:  
  • a: An array of integers. It is assumed that the array is non-empty (i.e., its size is at least 1).

  -----Output-----  
  The output is an integer that represents the maximum element in the array. This value is guaranteed to satisfy the following:  
  • It is greater than or equal to every element in the array.  
  • It is exactly equal to one of the elements in the array.

  -----Note-----  
  It is assumed that the provided array is non-empty. In cases where the array is empty, the function's behavior is not defined.
  -/

vc-preamble: |-

vc-helpers: |-
  -- <vc-helpers>
  def maxArray_aux (a : Array Int) (index : Nat) (current : Int) : Int :=
    if index < a.size then
      let new_current := if current > a[index]! then current else a[index]!
      maxArray_aux a (index + 1) new_current
    else
      current
  -- </vc-helpers>

vc-signature: |-
  def maxArray (a : Array Int) (h_precond : maxArray_precond (a)) : Int :=

vc-implementation: |-
  -- <vc-implementation>
    maxArray_aux a 1 a[0]!
  -- </vc-implementation>
  
vc-condition: |-
  @[reducible, simp]
  def maxArray_precond (a : Array Int) : Prop :=
    a.size > 0

  @[reducible, simp]
  def maxArray_postcond (a : Array Int) (result: Int) (h_precond : maxArray_precond (a)) :=
    (∀ (k : Nat), k < a.size → result >= a[k]!) ∧ (∃ (k : Nat), k < a.size ∧ result = a[k]!)

  theorem maxArray_spec_satisfied (a: Array Int) (h_precond : maxArray_precond (a)) :
      maxArray_postcond (a) (maxArray (a) h_precond) h_precond := by

vc-proof: |-
  -- <vc-proof>
    sorry
  -- </vc-proof>

vc-postamble: |-
  /--
  -- Reject Inputs
  [
      {
          "input": {
              "a": "#[]"
          }
      }
  ]
  -- Test
  [
      {
          "input": {
              "a": "#[1, 2, 3, 4, 5]"
          },
          "expected": 5,
          "unexpected": [
              4,
              3
          ]
      },
      {
          "input": {
              "a": "#[5, 3, 4, 1, 2]"
          },
          "expected": 5,
          "unexpected": [
              4,
              3,
              2
          ]
      },
      {
          "input": {
              "a": "#[7]"
          },
          "expected": 7,
          "unexpected": [
              6,
              8
          ]
      },
      {
          "input": {
              "a": "#[-1, -5, -3, -4]"
          },
          "expected": -1,
          "unexpected": [
              -3,
              -4
          ]
      },
      {
          "input": {
              "a": "#[-10, -20, -30, -5, -15]"
          },
          "expected": -5,
          "unexpected": [
              -10,
              -15,
              -20
          ]
      }
  ]
  -/
