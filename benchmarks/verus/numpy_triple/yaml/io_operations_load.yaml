vc-description: |-
  numpy.load: Load arrays or pickled objects from .npy, .npz or pickled files.
  
  Loads array data from a binary file. This operation reads serialized array data
  from disk storage and reconstructs it as a Vector. The function supports:
  - .npy files: Single array format
  - .npz files: Archive format with multiple arrays (simplified to single array here)
  - Pickled files: Python pickle format (when allow_pickle is True)
  
  The file parameter represents the path to the file to be loaded.
  For security reasons, pickled files should be avoided unless explicitly allowed.
  
  Memory mapping is not considered in this simplified specification.
  
  Specification: numpy.load returns a vector containing the data from the file.
  
  This specification captures the essential properties of the load operation:
  
  1. Data Preservation: The loaded vector contains exactly the data that was stored
  2. Size Consistency: The vector length matches the stored array dimensions
  3. Type Compatibility: Data is correctly interpreted as Float values
  4. Security Constraint: Object arrays are only loaded when explicitly allowed
  
  Mathematical Properties:
  - Idempotence: Loading the same file multiple times yields identical results
  - Determinism: For a given file, load always returns the same vector
  - Injectivity: Different valid files produce different vectors (when they differ)
  
  Precondition: The file exists, is readable, and contains valid array data
  Postcondition: The returned vector faithfully represents the stored data

vc-preamble: |-
  use vstd::prelude::*;
  
  verus! {

vc-helpers: |-

vc-spec: |-
  spec fn load_ghost(file: String, allow_pickle: bool, n: nat) -> Vec<f64>;
  
  fn load(file: String, allow_pickle: bool, n: usize) -> (result: Vec<f64>)
      ensures 
          result.len() == n,
          forall|i: int| 0 <= i < n ==> exists|stored_val: f64| result[i] == stored_val,
          forall|second_load: Vec<f64>| (#[trigger] second_load == load_ghost(file, allow_pickle, n as nat)) ==>
              forall|i: int| 0 <= i < n ==> result[i] == second_load[i]

vc-code: |-
  {
      assume(false);
      unreached();
  }

vc-postamble: |-
  }
  fn main() {}

