vc-description: |-
  Pseudo-Vandermonde matrix of given degree based on Legendre polynomials.
  Returns the pseudo-Vandermonde matrix of degree `deg` and sample points `x`.
  The pseudo-Vandermonde matrix is defined by V[..., i] = L_i(x) where 0 <= i <= deg.
  L_i represents the i-th Legendre polynomial.
  
  Specification: legvander constructs a pseudo-Vandermonde matrix where each row 
  corresponds to a point and each column corresponds to a Legendre polynomial evaluation.
  The matrix satisfies basic properties of Legendre polynomials:
  - L_0(x) = 1 (first column is all ones)
  - L_1(x) = x (second column equals input values when deg > 0)
  - The matrix has the correct dimensions

vc-preamble: |-
  use vstd::prelude::*;
  
  verus! {

vc-helpers: |-

vc-spec: |-
  fn legvander(x: Vec<f32>, deg: usize) -> (result: Vec<Vec<f32>>)
      requires x@.len() > 0,
      ensures
          result@.len() == x@.len(),
          forall|i: int| 0 <= i < result@.len() ==> result@[i].len() == deg + 1,
          forall|i: int| 0 <= i < result@.len() ==> result@[i][0] == 1.0f32,
          deg > 0 ==> forall|i: int| 0 <= i < result@.len() ==> result@[i][1] == x@[i],

vc-code: |-
  {
      assume(false);
      unreached()
  }

vc-postamble: |-
  }
  fn main() {}