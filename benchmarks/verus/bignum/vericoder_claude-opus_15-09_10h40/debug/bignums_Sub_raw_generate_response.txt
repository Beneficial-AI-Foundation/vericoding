=== Raw LLM Generate Response ===
Length: 2554 characters
--------------------------------------------------------------------------------
["proof fn lemma_str2int_append(s: Seq<char>, c: char)\n    requires\n        ValidBitString(s),\n        c == '0' || c == '1',\n    ensures\n        Str2Int(s.push(c)) == 2 * Str2Int(s) + if c == '1' { 1nat } else { 0nat },\n{\n    let s_new = s.push(c);\n    assert(s_new.len() == s.len() + 1);\n    assert(s_new.subrange(0, s_new.len() as int - 1) == s);\n    assert(s_new.index(s_new.len() as int - 1) == c);\n}\n\nproof fn lemma_str2int_zero(n: nat)\n    ensures\n        Str2Int(Seq::new(n, |_| '0')) == 0,\n    decreases n,\n{\n    if n == 0 {\n        assert(Seq::new(0, |_| '0').len() == 0);\n    } else {\n        let s = Seq::new(n, |_| '0');\n        assert(s.len() == n);\n        assert(s.index(s.len() as int - 1) == '0');\n        assert(s.subrange(0, s.len() as int - 1) == Seq::new(n - 1, |_| '0'));\n        lemma_str2int_zero((n - 1) as nat);\n    }\n}\n\nexec fn binary_subtract(s1: &[char], s2: &[char]) -> (res: Vec<char>)\n    requires\n        ValidBitString(s1@),\n        ValidBitString(s2@),\n        Str2Int(s1@) >= Str2Int(s2@),\n    ensures\n        ValidBitString(res@),\n        Str2Int(res@) == Str2Int(s1@) - Str2Int(s2@),\n{\n    let mut result = Vec::new();\n    let mut borrow = false;\n    let mut i: usize = 0;\n    \n    let max_len = if s1.len() > s2.len() { s1.len() } else { s2.len() };\n    \n    while i < max_len\n        invariant\n            i <= max_len,\n            max_len == if s1@.len() > s2@.len() { s1@.len() } else { s2@.len() },\n            ValidBitString(result@),\n            result@.len() == i,\n    {\n        let bit1 = if i < s1.len() {\n            if s1[i] == '1' { 1u8 } else { 0u8 }\n        } else {\n            0u8\n        };\n        \n        let bit2 = if i < s2.len() {\n            if s2[i] == '1' { 1u8 } else { 0u8 }\n        } else {\n            0u8\n        };\n        \n        let mut diff = bit1;\n        if borrow {\n            if diff == 0 {\n                diff = 1;\n            } else {\n                diff = 0;\n                borrow = false;\n            }\n        }\n        \n        if diff < bit2 {\n            diff = diff + 2;\n            borrow = true;\n        }\n        diff = diff - bit2;\n        \n        result.push(if diff == 1 { '1' } else { '0' });\n        i = i + 1;\n    }\n    \n    while result.len() > 1 && result[result.len() - 1] == '0'\n        invariant\n            ValidBitString(result@),\n            result@.len() >= 1,\n    {\n        result.pop();\n    }\n    \n    result\n}", "{\n    binary_subtract(s1, s2)\n}"]
--------------------------------------------------------------------------------
