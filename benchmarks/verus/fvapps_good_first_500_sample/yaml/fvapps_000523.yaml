vc-description: |-
  Zonal Computing Olympiad 2015, 29 Nov 2014
  
  We say that two integers x and y have a variation of at least K, if |x − y| ≥ K (the absolute value of their difference is at least K). Given a sequence of N integers a1,a2,...,aN and K, the total variation count is the number of pairs of elements in the sequence with variation at least K, i.e. it is the size of the set of pairs
  
  {(i,j)|1≤i<j≤N and|ai−aj|≥K} 
  
  For example if K = 1 and the sequence is 3,2,4 the answer is 3. If K = 1 and the sequence is 3, 1, 3 then the answer is 2.
  
  Your task is to write a program that takes a sequence and the value K as input and computes the total variation count.
  
  -----Input format-----
  The first line contains two positive integers N and K, separated by a space.
  
  This is followed by a line containing N integers separated by space giving the values
  of the sequence.
  
  -----Output format-----
  A single integer in a single line giving the total variation count.
  
  -----Test data-----
  You may assume that all integers in the input are in the range 0 to 10^8 inclusive.
  
  Subtask 1 (40 marks) : 1 ≤ N ≤ 4000, 1 ≤ K ≤ 10^8 
  Subtask 2 (60 marks) : 1 ≤ N ≤ 65000, 1 ≤ K ≤ 10^8 
  
  -----Sample Input-----
  3 1 
  3 1 3
  
  -----Sample Output-----
  2

vc-preamble: |-
  use vstd::prelude::*;

  verus! {

vc-helpers: |-

vc-spec: |-
  spec fn abs_diff(x: int, y: int) -> int {
      if x >= y { x - y } else { y - x }
  }

  spec fn count_valid_pairs(sequence: Seq<i32>, k: int, start: int) -> nat
      decreases sequence.len() - start
  {
      if start >= sequence.len() {
          0
      } else {
          let count_with_current = count_pairs_from_index(sequence, k, start, start + 1);
          count_with_current + count_valid_pairs(sequence, k, start + 1)
      }
  }

  spec fn count_pairs_from_index(sequence: Seq<i32>, k: int, i: int, j: int) -> nat
      decreases sequence.len() - j
  {
      if j >= sequence.len() {
          0nat
      } else {
          let has_variation: nat = if abs_diff(sequence[i] as int, sequence[j] as int) >= k { 1nat } else { 0nat };
          has_variation + count_pairs_from_index(sequence, k, i, j + 1)
      }
  }

  fn total_variation_count(n: usize, k: i32, sequence: Vec<i32>) -> (result: usize)
      requires 
          sequence.len() == n,
          n > 0,
          k >= 0,
      ensures 
          result >= 0,
          result <= (n * (n - 1)) / 2,
          result == count_valid_pairs(sequence@, k as int, 0),

vc-code: |-
  {
      // impl-start
      assume(false);
      0
      // impl-end
  }

vc-postamble: |-
  }
  fn main() {}