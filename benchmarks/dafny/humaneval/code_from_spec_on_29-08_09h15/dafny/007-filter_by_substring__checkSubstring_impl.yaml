vc-preamble: |-


vc-helpers: |-


vc-description: |-
  function_signature: method checkSubstring(s: string, sub: string) returns (result: bool)
  Check condition.

vc-spec: |-
  method checkSubstring(s: string, sub: string) returns (result: bool)

vc-code: |-
  {
    if |sub| == 0 {
      result := true;
      return;
    }
    
    if |sub| > |s| {
      result := false;
      return;
    }
    
    var i := 0;
    while i <= |s| - |sub|
      invariant 0 <= i <= |s| - |sub| + 1
    {
      var j := 0;
      var found := true;
      
      while j < |sub| && found
        invariant 0 <= j <= |sub|
        invariant found ==> (forall k :: 0 <= k < j ==> s[i + k] == sub[k])
      {
        if s[i + j] != sub[j] {
          found := false;
        }
        j := j + 1;
      }
      
      if found {
        result := true;
        return;
      }
      
      i := i + 1;
    }
    
    result := false;
  }

vc-postamble: |-
  method filter_by_substring(strings: seq<string>, substring: string) returns (res : seq<string>)
      // post-conditions-start
      ensures |res| <= |strings|
      ensures (forall s :: s in res ==> s in strings)
      // post-conditions-end
  {
    assume{:axiom} false;
  }

