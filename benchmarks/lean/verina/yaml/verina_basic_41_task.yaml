vc-description: |-
  /- 
  -----Description-----
  This task requires writing a Lean 4 method that determines whether an array of integers contains only one distinct element. The method should return true if the array is empty or if every element in the array is the same, and false if there are at least two different elements.
  
  -----Input-----
  The input consists of:
  a: An array of integers.
  
  -----Output-----
  The output is a Boolean value:
  Returns true if the array is empty or if all elements in the array are identical.
  Returns false if the array contains at least two distinct elements.
  
  -----Note-----
  The input array is assumed to be non-null.
  -/

vc-preamble: |-
  @[reducible, simp]
  def hasOnlyOneDistinctElement_precond (a : Array Int) : Prop :=
    a.size > 0

vc-helpers: |-
  -- <vc-helpers>
  -- </vc-helpers>

vc-signature: |-
  def hasOnlyOneDistinctElement (a : Array Int) (h_precond : hasOnlyOneDistinctElement_precond (a)) : Bool :=

vc-implementation: |-
  -- <vc-implementation>
    sorry
  -- </vc-implementation>

vc-condition: |-
  @[reducible, simp]
  def hasOnlyOneDistinctElement_postcond (a : Array Int) (result: Bool) (h_precond : hasOnlyOneDistinctElement_precond (a)) :=
    let l := a.toList
    (result → List.Pairwise (· = ·) l) ∧
    (¬ result → (l.any (fun x => x ≠ l[0]!)))
  
  theorem hasOnlyOneDistinctElement_spec_satisfied (a: Array Int) (h_precond : hasOnlyOneDistinctElement_precond (a)) :
      hasOnlyOneDistinctElement_postcond (a) (hasOnlyOneDistinctElement (a) h_precond) h_precond := by

vc-proof: |-
  -- <vc-proof>
    sorry
  -- </vc-proof>

vc-postamble: |-
  /-
  -- Invalid Inputs
  [
      {
          "input": {
              "a": "#[]"
          }
      }
  ]
  -- Tests
  [
      {
          "input": {
              "a": "#[1, 1, 1]"
          },
          "expected": true,
          "unexpected": [
              false
          ]
      },
      {
          "input": {
              "a": "#[1, 2, 1]"
          },
          "expected": false,
          "unexpected": [
              true
          ]
      },
      {
          "input": {
              "a": "#[3, 4, 5, 6]"
          },
          "expected": false,
          "unexpected": [
              true
          ]
      },
      {
          "input": {
              "a": "#[7]"
          },
          "expected": true,
          "unexpected": [
              false
          ]
      },
      {
          "input": {
              "a": "#[0, 0, 0, 0]"
          },
          "expected": true,
          "unexpected": [
              false
          ]
      },
      {
          "input": {
              "a": "#[0, 0, 1, 0]"
          },
          "expected": false,
          "unexpected": [
              true
          ]
      }
  ]
  -/

