vc-description: |-
  /-
  **Background**   
  You most probably know, that the *kilo* used by IT-People differs from the
  *kilo* used by the rest of the world. Whereas *kilo* in kB is (mostly) intrepreted as 1024 Bytes (especially by operating systems) the non-IT *kilo* denotes the factor 1000 (as in "1 kg is 1000g"). The same goes for the prefixes mega, giga, tera, peta and so on.
  To avoid misunderstandings (like your hardware shop selling you a 1E+12 Byte harddisk as 1 TB, whereas  your Windows states that it has only 932 GB, because the shop uses factor 1000 whereas operating systems use factor 1024 by default) the  International Electrotechnical Commission has proposed to use **kibibyte** for 1024 Byte.The according unit symbol would be **KiB**. Other Prefixes would be respectivly:   
  
  ```
  1 MiB = 1024 KiB   
  1 GiB = 1024 MiB   
  1 TiB = 1024 GiB     
  ```
  
  **Task**   
  Your task is to write a conversion function between the kB and the KiB-Units. The function receives as parameter a memory size including a unit and converts into the corresponding unit of the other system:
  
  ```
  memorysizeConversion ( "10 KiB") -> "10.24 kB"   
  memorysizeConversion ( "1 kB") -> "0.977 KiB"   
  memorysizeConversion ( "10 TB") -> "9.095 TiB"   
  memorysizeConversion ( "4.1 GiB") -> "4.402 GB"   
  ```
  
  **Hints**
  - the parameter always contains a (fractioned) number, a whitespace and a valid unit
  - units are case sensitive, valid units are **kB MB GB TB KiB MiB GiB TiB**
  - result must be rounded to 3 decimals (round half up,no trailing zeros) see examples above
  
  **Resources**
  If you want to read more on ...ibi-Units:  
  https://en.wikipedia.org/wiki/Kibibyte
  -/

vc-preamble: |-
  def binary_units := ["KiB", "MiB", "GiB", "TiB"]
  
  def metric_units := ["kB", "MB", "GB", "TB"]
  
  def isValidIndex (i : Nat) : Prop :=
    i < 4

vc-helpers: |-

vc-definitions: |-
  def memorysize_conversion (s : String) : String :=
  sorry

vc-theorems: |-
  theorem binary_units_length : binary_units.length = 4 :=
  sorry
  
  theorem metric_units_length : metric_units.length = 4 :=
  sorry
  
  theorem binary_to_metric_unit_preservation {value : Float} {unit_idx : Nat}
    (h1 : 0.000001 ≤ value) (h2 : value ≤ 1000000)
    (h3 : isValidIndex unit_idx) :
    let input := s!"{value} {binary_units[unit_idx]}"
    let result := memorysize_conversion input
    result.endsWith metric_units[unit_idx] :=
  sorry
  
  theorem metric_to_binary_unit_preservation {value : Float} {unit_idx : Nat}
    (h1 : 0.000001 ≤ value) (h2 : value ≤ 1000000)
    (h3 : isValidIndex unit_idx) :
    let input := s!"{value} {metric_units[unit_idx]}"
    let result := memorysize_conversion input
    result.endsWith binary_units[unit_idx] :=
  sorry

vc-postamble: |-
  -- Apps difficulty: introductory
  -- Assurance level: unguarded
  
  /--
  info: '1.024 kB'
  -/
  #guard_msgs in
  #eval memorysize_conversion "1 KiB"
  
  /--
  info: '9.095 TiB'
  -/
  #guard_msgs in
  #eval memorysize_conversion "10 TB"
  
  /--
  info: '4.402 GB'
  -/
  #guard_msgs in
  #eval memorysize_conversion "4.1 GiB"

