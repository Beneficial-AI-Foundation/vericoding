vc-description: |-
  /-
  A password is considered strong if below conditions are all met:

   It has at least 6 characters and at most 20 characters. 
   It must contain at least one lowercase letter, at least one uppercase letter, and at least one digit. 
   It must NOT contain three repeating characters in a row ("...aaa..." is weak, but "...aa...a..." is strong, assuming other conditions are met). 

  Write a function strongPasswordChecker(s), that takes a string s as input, and return the MINIMUM change required to make s a strong password. If s is already strong, return 0.

  Insertion, deletion or replace of any one character are all considered as one change.
  -/

vc-preamble: |-
  def isLower (c : Char) : Bool :=
    sorry

  def isUpper (c : Char) : Bool :=
    sorry

  def isDigit (c : Char) : Bool :=
    sorry

  def hasThreeRepeated (s : String) : Bool :=
    sorry

vc-helpers: |

vc-definitions: |-
  def strongPasswordChecker (s : String) : Nat :=
    sorry

vc-theorems: |-
  theorem output_non_negative (s : String) :
    strongPasswordChecker s ≥ 0 :=
    sorry

  theorem valid_password_needs_no_changes (s : String) :
    (s.length ≥ 6 ∧ s.length ≤ 20 ∧
     s.any isLower ∧
     s.any isUpper ∧
     s.any isDigit ∧
     ¬hasThreeRepeated s) →
    strongPasswordChecker s = 0 :=
    sorry

  theorem short_password_minimum_changes (s : String) :
    s.length < 6 →
    strongPasswordChecker s ≥ 6 - s.length :=
    sorry

  theorem long_password_minimum_changes (s : String) :
    s.length > 20 →
    strongPasswordChecker s ≥ s.length - 20 :=
    sorry

  theorem missing_categories_minimum_changes (s : String) :
    let missing := (if s.any isLower then 0 else 1) +
                   (if s.any isUpper then 0 else 1) +
                   (if s.any isDigit then 0 else 1)
    strongPasswordChecker s ≥ missing :=
    sorry

  theorem repeated_chars_minimum_changes (s : String) :
    (∀ c : Char, c ∈ s.data → c = 'a') →
    s.length ≥ 3 →
    strongPasswordChecker s ≥ s.length / 3 :=
    sorry

vc-postamble: |-
  -- Apps difficulty: interview
  -- Assurance level: unguarded

  /-
  info: 5
  -/
  #guard_msgs in
  #eval strongPasswordChecker "a"

  /-
  info: 3
  -/
  #guard_msgs in
  #eval strongPasswordChecker "aA1"

  /-
  info: 0
  -/
  #guard_msgs in
  #eval strongPasswordChecker "1337C0d3"

