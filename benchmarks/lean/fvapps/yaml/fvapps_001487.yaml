vc-description: |-
  /-
  Every character in the string “IITMANDI” is given a certain number of points. You are given a scrabble board with only one row. The input contains the positions of score modifiers such as: Double Letter, Triple Letter, Double Word and Triple Word. You need to find the best position to place the string “IITMANDI” such that your score is maximized. 
  Double Letter - Doubles the number of points you get for the letter placed on the double letter.
  Triple Letter - Triples the number of points you get for the letter placed on the triple letter.
  Double Word - Doubles the number of points you get for the word. Applied after applying above modifiers.
  Triple Word - Triples the number of points you get for the word. Applied after applying the above modifiers.
  The word has to be read from left to right. You can’t place it in the reverse direction.

  The letters have to be placed continuously on the board.

  If there is no modifier or a double word or triple word modifier before a tile, it's score is added to the total score. The double word and triple modifiers are applied at the end.

  -----Input Format-----
  - First line containes a single integer $T$ - the number of test cases.
  - First line of each test case contains a single integer $N$ - the size of the board.    
  - Second line of each test case contains a string of size $N$ representing the board according to the following convention:

  '.' - No modifier

  'd' - Double letter

  't' - Triple letter

  'D' - Double word

  'T' - Triple word     
  - Third line of each test case contains 8 integers corresponding to the points associated with each letter of the string "IITMANDI". Note that the 3 'I's in IITMANDI cannot be interchanged freely. The score of the first 'I' will be equal to the first integer, score of the second 'I' will be equal to the second integer and the score of the last 'I' will be equal to the last integer.

  -----Output Format-----
  For each test case, output a single integer in a new line, the maximum possible score. 

  -----Constraints-----
  $ 1 \leq T \leq 1000 $
  $ 8 \leq N \leq 100 $
  $ 0 \leq $ Points for each character $ \leq 10^5 $ 

  -----Sample Input-----
  2

  10

  ..d.t.D..d

  10 11 12 9 8 10 11 15

  22

  dtDtTD..ddT.TtTdDT..TD

  12297 5077 28888 17998 12125 27400 31219 21536

  -----Sample Output-----
  270

  35629632
  -/

vc-preamble: |

vc-helpers: |

vc-definitions: |-
  def calculate_max_points (boardSize : Nat) (board : String) (letterPoints : List Nat) : Nat :=
    sorry

vc-theorems: |-
  theorem board_size_properties
    (boardSize : Nat)
    (letterPoints : List Nat)
    (h1 : boardSize ≥ 8)
    (h2 : boardSize ≤ 100)
    (h3 : letterPoints.length = 8)
    (h4 : ∀ x ∈ letterPoints, x ≥ 0 ∧ x ≤ 100000) :
    let board := String.mk (List.replicate boardSize '.')
    let result := calculate_max_points boardSize board letterPoints
    result ≥ 0 := sorry

  theorem scoring_properties
    (boardSize : Nat)
    (board : String)
    (letterPoints : List Nat)
    (h1 : boardSize ≥ 8)
    (h2 : boardSize ≤ 100)
    (h3 : board.length ≥ boardSize)
    (h4 : ∀ c ∈ board.data, c = '.' ∨ c = 'd' ∨ c = 't' ∨ c = 'D' ∨ c = 'T')
    (h5 : letterPoints.length = 8)
    (h6 : ∀ x ∈ letterPoints, x ≥ 0 ∧ x ≤ 100000) :
    let dots_board := String.mk (List.replicate boardSize '.')
    let base_score := calculate_max_points boardSize dots_board letterPoints
    let result := calculate_max_points boardSize (board.take boardSize) letterPoints
    result ≥ base_score := sorry

  theorem multiplier_properties
    (board : String)
    (letterPoints : List Nat)
    (h1 : board.length = 8)
    (h2 : ∀ c ∈ board.data, c = '.' ∨ c = 'd' ∨ c = 't' ∨ c = 'D' ∨ c = 'T')
    (h3 : letterPoints.length = 8)
    (h4 : ∀ x ∈ letterPoints, x ≥ 0) :
    let result := calculate_max_points 8 board letterPoints
    let base_score := calculate_max_points 8 (String.mk (List.replicate 8 '.')) letterPoints
    let all_doubles := calculate_max_points 8 (String.mk (List.replicate 8 'D')) letterPoints 
    let all_triples := calculate_max_points 8 (String.mk (List.replicate 8 'T')) letterPoints
    let points_sum := letterPoints.foldr (· + ·) 0
    result ≥ base_score ∧
    all_doubles = (2 ^ 8) * points_sum ∧
    all_triples = (3 ^ 8) * points_sum := sorry

vc-postamble: |-
  -- Apps difficulty: interview
  -- Assurance level: unguarded

  /-
  info: 270
  -/
  #guard_msgs in
  #eval calculate_max_points 10 "..d.t.D..d" [10, 11, 12, 9, 8, 10, 11, 15]

  /-
  info: 35629632
  -/
  #guard_msgs in
  #eval calculate_max_points 22 "dtDtTD..ddT.TtTdDT..TD" [12297, 5077, 28888, 17998, 12125, 27400, 31219, 21536]

