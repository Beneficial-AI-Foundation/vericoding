vc-description: |-
  Congratulations! That Special Someone has given you their phone number.
  
  But WAIT, is it a valid number? 
  
  Your task is to write a function that verifies whether a given string contains a valid British mobile (cell) phone number or not. 
  
  If valid, return 'In with a chance'.
  
  If invalid, or if you're given an empty string, return 'Plenty more fish in the sea'.
  
  A number can be valid in the following ways: 
  
  Here in the UK mobile numbers begin with '07' followed by 9 other digits, e.g. '07454876120'.
  
  Sometimes the number is preceded by the country code, the prefix '+44', which replaces the '0' in ‘07’, e.g. '+447454876120'.
  
  And sometimes you will find numbers with dashes in-between digits or on either side, e.g. '+44--745---487-6120' or '-074-54-87-61-20-'. As you can see, dashes may be consecutive. 
  
  Good Luck Romeo/Juliette!

vc-preamble: |-
  def validateNumber (phone : String) : String := sorry
  
  def YES : String := "In with a chance"

vc-helpers: |-
  -- <vc-helpers>
  -- </vc-helpers>

vc-definitions: |-
  def NO : String := "Plenty more fish in the sea"
  
  theorem valid_number_format (phone : String) (h1 : String.length phone > 0) : 
    validateNumber phone = YES ∨ validateNumber phone = NO :=
  sorry

vc-theorems: |-
  theorem valid_uk_mobile (phone : String) (h1 : String.startsWith phone "+44" ∨ String.startsWith phone "0") 
      (h2 : String.length (String.replace phone "[^0-9]" "") = 11) : 
    validateNumber phone = YES :=
  sorry
  
  theorem invalid_number_wrong_prefix (phone : String) 
      (h1 : ¬String.startsWith phone "+44" ∧ ¬String.startsWith phone "0") :
    validateNumber phone = NO :=
  sorry
  
  theorem invalid_number_wrong_length (phone : String)
      (h1 : String.length (String.replace phone "[^0-9]" "") ≠ 11) :
    validateNumber phone = NO :=
  sorry
  
  theorem validates_with_dashes (phone : String) 
      (h1 : String.contains phone '-')
      (h2 : String.startsWith (String.replace phone "-" "") "+44" ∨ 
            String.startsWith (String.replace phone "-" "") "0")
      (h3 : String.length (String.replace phone "[^0-9]" "") = 11) :
    validateNumber phone = YES :=
  sorry
  
  /--
  info: 'In with a chance'
  -/
  #guard_msgs in
  #eval validate_number "07454876120"
  
  /--
  info: 'In with a chance'
  -/
  #guard_msgs in
  #eval validate_number "0745--487-61-20"
  
  /--
  info: 'In with a chance'
  -/
  #guard_msgs in
  #eval validate_number "+447535514555"
  
  /--
  info: 'Plenty more fish in the sea'
  -/
  #guard_msgs in
  #eval validate_number "0754876120"
  
  /--
  info: 'Plenty more fish in the sea'
  -/
  #guard_msgs in
  #eval validate_number "+337535512555"

vc-postamble: |-
  -- Apps difficulty: introductory
  -- Assurance level: unguarded

