vc-description: |-
  Implement `String#ipv4_address?`, which should return true if given object is an IPv4 address - four numbers (0-255) separated by dots.
  
  It should only accept addresses in canonical representation, so no leading `0`s, spaces etc.

vc-preamble: |-

vc-helpers: |-
  -- <vc-helpers>
  -- </vc-helpers>

vc-definitions: |-
  def ipv4_address (s : String) : Bool :=
    sorry

vc-theorems: |-
  theorem valid_ip_addresses (a b c d : Nat) 
    (h₁ : a ≤ 255) (h₂ : b ≤ 255) (h₃ : c ≤ 255) (h₄ : d ≤ 255) :
    ipv4_address (s!"{a}.{b}.{c}.{d}") = true :=
  sorry
  
  theorem rejects_large_numbers (n : Nat) (h : n ≥ 256) :
    ipv4_address (s!"127.0.0.{n}") = false :=
  sorry
  
  theorem rejects_invalid_characters (s : String) 
    (h : ∃ c ∈ s.toList, ¬c.isDigit ∧ c ≠ '.') :
    ipv4_address s = false :=
  sorry
  
  theorem rejects_wrong_segment_count (n : Nat) 
    (h₁ : n > 0) (h₂ : n ≠ 4) :
    ipv4_address (String.intercalate "." (List.replicate n "0")) = false :=
  sorry
  
  theorem rejects_leading_zeros (n : Nat) 
    (h : 1 ≤ n ∧ n ≤ 99) :
    ipv4_address (s!"127.0.0.{String.mk (List.replicate (3 - String.length (toString n)) '0' ++ String.toList (toString n))}") = false :=
  sorry
  
  theorem rejects_whitespace (s : String) 
    (h : s.length > 0) :
    ipv4_address (s!"127.0.0.1{s}") = false :=
  sorry
  
  /--
  info: True
  -/
  #guard_msgs in
  #eval ipv4_address "127.0.0.1"
  
  /--
  info: True
  -/
  #guard_msgs in
  #eval ipv4_address "0.0.0.0"
  
  /--
  info: True
  -/
  #guard_msgs in
  #eval ipv4_address "255.255.255.255"
  
  /--
  info: False
  -/
  #guard_msgs in
  #eval ipv4_address ""
  
  /--
  info: False
  -/
  #guard_msgs in
  #eval ipv4_address "10.256.30.40"
  
  /--
  info: False
  -/
  #guard_msgs in
  #eval ipv4_address "10.20.030.40"
  
  /--
  info: False
  -/
  #guard_msgs in
  #eval ipv4_address "127.0.0.1 "
  
  /--
  info: False
  -/
  #guard_msgs in
  #eval ipv4_address " 127.0.0.1"
  
  /--
  info: False
  -/
  #guard_msgs in
  #eval ipv4_address "127..0.1"

vc-postamble: |-
  -- Apps difficulty: introductory
  -- Assurance level: unguarded

